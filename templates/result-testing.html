<!DOCTYPE html>
<html lang="id">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Font -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
        
        <!-- Style -->
        <link rel="stylesheet" href="../static/css/style.css">
        <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.css" rel="stylesheet" />
        
        <!-- Script -->
        <script src="https://cdn.tailwindcss.com"></script>

        <title>Prediksi Tingkat Kesejahteraan di Indonesia Menggunakan metode Random Forest Regressor</title>
    </head>
    <body>
        <div id="particles-js" class="absolute top-0 left-0 w-full h-full" style="background: linear-gradient(to bottom, rgba(15, 82, 186, 0.2), rgba(255, 255, 255, 0.5));">
        </div>
        <!-- Navbar -->
        <nav class="fixed w-full z-20 top-0 start-0 h-16 border-b border-gray-200 bg-white">
            <div class="flex flex-wrap items-center justify-between max-w-screen-lg mx-auto py-4">
                <a href="/" class="flex items-center gap-3">
                    <img src="{{ url_for('static', filename='logo.webp') }}" class="max-h-10" alt="Tugas Akhir">
                    <span class="text-lg font-semibold text-[#05386b]">Tugas Akhir</span>
                </a>
                <div class="flex items-center justify-between gap-8" id="navbar-sticky">
                    <a href="/" class="active font-medium text-sm text-black hover:hover:text-[#05386b]">Beranda</a>
                    <a href="/training" class="font-medium text-sm text-black hover:text-[#05386b]">Training</a>
                    <a href="/testing" class="font-medium text-sm text-[#05386b] hover:underline">Testing</a>
                    <a href="/prediction" class="font-medium text-sm text-black hover:text-[#05386b]">Predict</a>
                </div>
            </div>
        </nav>

        <!-- Content -->
         <main class="flex flex-col items-center justify-center gap-8 relative z-10 mt-[96px] mb-[40px]">
            <div class="flex flex-col gap-6 max-w-[1024px] w-full mx-auto">
                <div class="font-bold text-xl text-black">Hasil Pengujian Model</div>
                <div class="flex flex-col gap-2.5">
                    <div class="flex items-center gap-2">
                        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#000000" viewBox="0 0 256 256">
                            <path d="M215.12,123.64a8,8,0,1,0-14.24-7.28,79.58,79.58,0,0,1-33.08,33.5l-16.58-37.32A40,40,0,0,0,136,40.8V24a8,8,0,0,0-16,0V40.8a40,40,0,0,0-15.22,71.74L56.69,220.75a8,8,0,1,0,14.62,6.5l25.14-56.56A95.48,95.48,0,0,0,128,176a99.13,99.13,0,0,0,31.6-5.21l25.09,56.46a8,8,0,0,0,14.62-6.5l-25-56.25A95.81,95.81,0,0,0,215.12,123.64ZM128,56a24,24,0,1,1-24,24A24,24,0,0,1,128,56Zm0,104a79.52,79.52,0,0,1-25-4l16.42-36.94a39.81,39.81,0,0,0,17.2,0l16.48,37.06A83.21,83.21,0,0,1,128,160Z"></path>
                        </svg>
                        <div class="underline font-semibold text-base text-black">Metrik Evaluasi</div>
                    </div>
                    <table>
                        <tr>
                            <td class="w-[24%] py-1 text-sm">Mean Squared Error (MSE)</td>
                            <td class="py-1 text-sm">:&nbsp;&nbsp;{{ mse }}</td>
                        </tr>
                        <tr>
                            <td class="w-[24%] py-1 text-sm">Root Mean Squared Error (RMSE)</td>
                            <td class="py-1 text-sm">:&nbsp;&nbsp;{{ rmse }}</td>
                        </tr>
                        <tr>
                            <td class="w-[24%] py-1 text-sm">Coefficient of Determination (RÂ²)</td>
                            <td class="py-1 text-sm">:&nbsp;&nbsp;{{ r2 }}</td>
                        </tr>
                    </table>
                </div>
                <div class="flex flex-col gap-2.5">
                    <div class="flex items-center gap-2">
                        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#000000" viewBox="0 0 256 256">
                            <path d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM40,112H80v32H40Zm56,0H216v32H96ZM216,64V96H40V64ZM40,160H80v32H40Zm176,32H96V160H216v32Z"></path>
                        </svg>
                        <div class="underline font-semibold text-base text-black">Tabel Perbandingan Nilai Prediksi dan Aktual</div>
                    </div>
                    <table id="default-table" class="overflow-hidden border border-separate border-spacing-0 border-gray-300 rounded-lg">
                        <thead>
                            <tr>
                                <th class="text-center">
                                    <span class="capitalize font-bold text-sm text-black">Provinsi</span>
                                </th>
                                <th class="text-center">
                                    <span class="capitalize font-bold text-sm text-black">IPM</span>
                                </th>
                                <th class="text-center">
                                    <span class="capitalize font-bold text-sm text-black">IPM Prediksi</span>
                                </th>
                                <th class="text-center">
                                    <span class="capitalize font-bold text-sm text-black">Selisih</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in result %}
                                <tr class="hover:bg-gray-50">
                                    <td class="border-t border-gray-300 tabular-nums text-center text-sm text-black">{{ row['provinsi'] }}</td>
                                    <td class="border-t border-gray-300 tabular-nums text-center text-sm text-black">{{ row['ipm'] }}</td>
                                    <td class="border-t border-gray-300 tabular-nums text-center text-sm text-black">{{ row['ipm_prediksi']|round(2) }}</td>
                                    <td class="border-t border-gray-300 tabular-nums text-center text-sm text-black">{{ row['Selisih'] |round(2) }}</td>
                                </tr>
                            {%endfor%} 
                        </tbody>
                    </table>            
                </div>
                <!-- <div class="flex flex-col gap-2.5">
                    <div class="flex items-center gap-2">
                        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#000000" viewBox="0 0 256 256">
                            <path d="M232,208a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V48a8,8,0,0,1,16,0v94.37L90.73,98a8,8,0,0,1,10.07-.38l58.81,44.11L218.73,90a8,8,0,1,1,10.54,12l-64,56a8,8,0,0,1-10.07.38L96.39,114.29,40,163.63V200H224A8,8,0,0,1,232,208Z"></path>
                        </svg>
                        <div class="underline font-semibold text-base text-black">Grafik Perbandingan Nilai Prediksi dan Aktual</div>
                    </div>
                    <img src="{{ plot }}" class="w-full h-[440px] object-cover"  alt="Actual vs Predicted Plot">
                </div> -->
            </div>
         </main>

         <script src="https://cdn.jsdelivr.net/npm/simple-datatables@9.0.3"></script>
         <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"></script>
         <script>
            const dataTable = new simpleDatatables.DataTable("#default-table", { searchable: false, sortable: false });
         </script>
    </body>
</html>